<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Jquery.barrager.js 专业的网页弹幕插件</title>
    <link rel="stylesheet" type="text/css" href="static/css/bootstrap.min.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="static/css/style.css" />
    <link rel="stylesheet" type="text/css" href="dist/css/barrager.css">
    <link rel="stylesheet" type="text/css" href="static/pick-a-color/css/pick-a-color-1.2.3.min.css">
    <link type="text/css" rel="stylesheet" href="static/syntaxhighlighter/styles/shCoreDefault.css" />
</head>

<body class="bb-js">
    <div class="container">
        <section class="bb-section">
            <div class="lead-top">
                <div class="text-center">
                    <p class="hidden-xs bb-code code-leader">
                        $('<span class="bb-code-string">body</span>').barrager(<span
                            class="bb-code-string">{'img':'barrager.png','info':'Hello world!'}</span>);</br>
                    </p>
                    <p>
                        <button class="bb-trigger btn btn-primary btn-lg  bb-light-blue" onclick="run_example()">
                            弹弹弹</button>
                    </p>
                </div>
            </div>
        </section>
        <section id="custom" class="bb-section">
            <div class="page-header">
                <h2>自定义</h2>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">文字</label>
                            <div class="col-sm-6">
                                <input class="form-control" name="info" type="text" placeholder="弹幕文字信息" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">链接</label>
                            <div class="col-sm-6">
                                <input class="form-control" name="href" type="text"
                                    placeholder="http://www.yaseng.org" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">延迟</label>
                            <div class="col-sm-2">
                                <input class="form-control" name="speed" type="text" placeholder="6" value="6" />
                            </div>

                            <label class="col-sm-2 control-label">关闭按钮</label>
                            <div class="col-sm-2">
                                <input class="form-control" name="close" type="checkbox" checked>
                            </div>

                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">高度</label>
                            <div class="col-sm-4">
                                <label class="radio-inline">
                                    <input type="radio" name="bottomradio" value="0" checked="checked"> 随机
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" name="bottomradio" value="1"> 设置
                                </label>
                            </div>
                            <div class="col-sm-2">
                                <input class="form-control" name="bottom" type="text" placeholder="70" value="70" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">图片</label>
                            <div class="col-sm-6">
                                <label class="radio-inline">
                                    <input type="radio" name="img" value="cute.png" checked=""> cute.png
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" name="img" value="haha.gif"> haha.gif
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" name="img" value="none"> 无图
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">颜色</label>
                            <div class="col-sm-6">
                                <input type="text" value="fff" name="color" class="pick-a-color form-control">
                            </div>
                        </div>
                    </form>
                    <div class="form-group">
                        <label class="col-sm-3 control-label"></label>
                        <div class="col-sm-3">
                            <button class="btn btn-primary   bb-light-blue" onclick="run()"> 运行</button>
                        </div>
                        <div class="col-sm-3">
                            <button class="btn btn-warning   " onclick="clear_barrage()"> 清除</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <textarea class="form-control" id="barrager-code" rows="14"></textarea>
                </div>
            </div>


        </section>
        <section id="usage" class="bb-section">
            <div class="page-header">
                <h2>使用</h2>
            </div>
            <div>
                <h3>发布弹幕</h3>
                弹幕文字必选,图片,链接为空则不显示,其他的可选项有默认值,弹幕具体配置如下代码。
                <pre class="brush: js;">
            var item={
               img:'static/heisenberg.png', //图片
               info:'弹幕文字信息', //文字
               href:'http://www.yaseng.org', //链接
               close:true, //显示关闭按钮
               speed:6, //延迟,单位秒,默认6
               bottom:70, //距离底部高度,单位px,默认随机
               color:'#fff', //颜色,默认白色
               old_ie_color:'#000000', //ie低版兼容色,不能与网页背景相同,默认黑色
             }
            $('body').barrager(item);
                        </pre>
                <h3>清除所有弹幕</h3>
                <pre class="brush: js;">
             $.fn.barrager.removeAll();
             </pre>
                <h3> 兼容低版本ie </h3>
                ie 浏览器小于9不兼容css 圆角,采用兼容样式,可单独设置弹幕的颜色,属性为old_ie_color,建议不要与网页主背景色相同。
                兼容模式如图</br></br>
                <img src="static/img/ie.png">

            </div>
        </section>
        <section id="usage" class="bb-section">
            <div class="page-header">
                <h2>集成</h2>
            </div>
            <div>
                <h3>发布弹幕</h3>
                <section id="general-server" class="bb-section">
                    <h4> 通用后端 </h4>
                    读取服务端有两种模式,适应于不同的场景 </br>
                    1. 实时读取,隔x秒请求一次接口,获取一条弹幕,发送。 </br>
                    2. 一次读取完毕,隔x秒发送一条弹幕。</br>
                    第一种模式示范代码</br>
                    server 端(php)</br>


                    第二种模式示范代码。 </br>
                    server 端 (php)
                    <pre class="brush: php">
                            //数组里面可以自定义弹幕的所有属性。
            $barrages=
            array(
                array(
                    'info'   => '第一条弹幕',
                    'img'    => 'static/img/heisenberg.png',
                    'href'   => 'http://www.yaseng.org',

                    ),
                array(
                    'info'   => '第二条弹幕',
                    'img'    => 'static/img/yaseng.png',
                    'href'   => 'http://www.yaseng.org',
                    'color'  =>  '#ff6600'

                    ),
                array(
                    'info'   => '第三条弹幕',
                    'img'    => 'static/img/mj.gif',
                    'href'   => 'http://www.yaseng.org',
                    'bottom' => 70 ,

                    ),
                array(
                    'info'   => '第四条弹幕',
                    'href'   => 'http://www.yaseng.org',
                    'close'  =>false,

                    ),

                );


            echo   json_encode($barrages);
             </pre>
                    浏览器端 </br>
                    <pre class="brush: js">
            $.ajaxSettings.async = false;
            $.getJSON('server.php?mode=2',function(data){

            //每条弹幕发送间隔
            var looper_time=3*1000;
            var items=data;
            //弹幕总数
            var total=data.length;
            //是否首次执行
            var run_once=true;
            //弹幕索引
            var index=0;
            //先执行一次
            barrager();
            function  barrager(){


              if(run_once){
                  //如果是首次执行,则设置一个定时器,并且把首次执行置为false
                  looper=setInterval(barrager,looper_time);
                  run_once=false;
              }
              //发布一个弹幕
              $('body').barrager(items[index]);
              //索引自增
              index++;
              //所有弹幕发布完毕，清除计时器。
              if(index == total){

                  clearInterval(looper);
                  return false;
              }




            }


            });
              </pre>

            </div>
        </section>

    </div>
    <!-- JS dependencies -->
    <script type="text/javascript" src="static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="static/js/tinycolor-0.9.15.min.js"></script>
    <script type="text/javascript" src="dist/js/jquery.barrager.js"></script>
    <script type="text/javascript" src="static/syntaxhighlighter/scripts/shCore.js"></script>
    <script type="text/javascript" src="static/syntaxhighlighter/scripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="static/syntaxhighlighter/scripts/shBrushPhp.js"></script>
    <script type="text/javascript" src="static/pick-a-color/js/pick-a-color-1.2.3.min.js"></script>
    <script src="index.js"></script>
</body>

</html>